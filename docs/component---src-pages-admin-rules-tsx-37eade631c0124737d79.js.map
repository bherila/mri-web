{"version":3,"file":"component---src-pages-admin-rules-tsx-37eade631c0124737d79.js","mappings":"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","sources":["webpack://mri-web/./src/components/pick-time-component.tsx","webpack://mri-web/./src/helpers/authToken.ts","webpack://mri-web/./src/models/Scan.ts","webpack://mri-web/./src/pages/admin/rules.tsx"],"sourcesContent":["import * as React from 'react'\nimport * as Api from '../api/api'\nimport {SafetyState} from \"../models/SafetyState\";\nimport ReactModal from 'react-modal';\nimport {ServiceType, SlotAvailabilityTime} from \"../api/api\";\n\nconst take = 4;\n\ninterface TimePickState {\n\terr: any,\n\toffset: number;\n\ttotal: number;\n\tqna: SafetyState;\n\ttimes: Api.SlotAvailabilityDate[];\n\tselectedTime: any;\n\tshowModal: boolean;\n}\n\nexport class TimePickWidget extends React.Component<{scan: ServiceType, onPick: (time: Api.SlotAvailabilityTime) => any}, TimePickState> {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\terr: '',\n\t\t\toffset: 0,\n\t\t\ttotal: 14,\n\t\t\tqna: SafetyState.loadState(),\n\t\t\tselectedTime: null,\n\t\t\ttimes: [],\n\t\t\tshowModal: false,\n\t\t};\n\t}\n\n\tpublic componentDidMount() {\n\t\tnew Api.ScheduleApi().timeSlotsGET({\n\t\t\twithContrast: this.props.scan.contrast === 'with and without contrast',\n\t\t\tlocationId: ''\n\t\t}).then((result) => {\n\t\t\tif (result.value) {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttimes: result.value || [],\n\t\t\t\t\ttotal: result.value.length || 0,\n\t\t\t\t\tqna: SafetyState.loadState(),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\terr: result.message || 'Error',\n\t\t\t\t\tqna: SafetyState.loadState(),\n\t\t\t\t});\n\t\t\t}\n\t\t}, (err) => this.setState({\n\t\t\terr,\n\t\t\tqna: SafetyState.loadState(),\n\t\t}));\n\t}\n\n\tpublic UNSAFE_componentWillReceiveProps(nextProps: Readonly<{ scan: ServiceType; onPick: (time: SlotAvailabilityTime) => any }>, nextContext: any): void {\n\t\tthis.setState({offset: 0});\n\t\tthis.componentDidMount();\n\t}\n\n\tpublic renderModal() {\n\t\treturn (\n\t\t\t<ReactModal\n\t\t\t\tisOpen={this.state.showModal}\n\t\t\t\tclassName=\"modal-content animated fadeInUp\"\n\t\t\t\toverlayClassName=\"modal-wrapper\"\n\t\t\t>\n\t\t\t\t<p><b>The time you selected is tomorrow.</b></p>\n\t\t\t\t<p>We won't have time to obtain prior authorization from your insurance carrier. If you aren't using insurance, this won't be a problem.</p>\n\t\t\t\t<p>Are you sure you want to select this time?</p>\n\t\t\t\t<p>\n\t\t\t\t\t<button type=\"button\"\n\t\t\t\t\t\t\tclassName=\"button w-button\"\n\t\t\t\t\t\t\tonClick={() => this.pickTime(this.state.selectedTime, false)}>\n\t\t\t\t\t\tYes, continue\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type=\"button\"\n\t\t\t\t\t\t\tclassName=\"button w-button\"\n\t\t\t\t\t\t\tonClick={() => this.setState({showModal: false})}>\n\t\t\t\t\t\tNo, change time\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t</ReactModal>\n\t\t);\n\t}\n\n\tpublic render() {\n\t\tconst {offset, total, times} = this.state;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"w-row\">\n\t\t\t\t\t<div className=\"w-col w-col-2\">\n\t\t\t\t\t\t<div className=\"timeslotcolumn\">\n\t\t\t\t\t\t\t{offset > 0 && (\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\"\n\t\t\t\t\t\t\t\t   onClick={() => this.setState({offset: offset - 1})}\n\t\t\t\t\t\t\t\t   className=\"buttontimeslot w-button\">\n\t\t\t\t\t\t\t\t\t&laquo; Earlier Dates\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{times && times.map((date, i) => (\n\t\t\t\t\t\t(i >= offset && (i - offset) < take) && (\n\t\t\t\t\t\t\t<div key={JSON.stringify(date || i)} className=\"w-col w-col-2\">\n\t\t\t\t\t\t\t\t{this.renderSlotAvailabilityDate(date, !!date.isTomorrow)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t))}\n\t\t\t\t\t{offset + take < total && (\n\t\t\t\t\t\t<div className=\"w-col w-col-2\">\n\t\t\t\t\t\t\t<div className=\"timeslotcolumn\">\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\"\n\t\t\t\t\t\t\t\t   onClick={() => this.setState({offset: offset + 1})}\n\t\t\t\t\t\t\t\t   className=\"buttontimeslot w-button\">\n\t\t\t\t\t\t\t\t\tLater Dates &raquo;\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{this.renderModal()}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\tprivate renderSlotAvailabilityDate(dt: Api.SlotAvailabilityDate, needConfirm: boolean) {\n\t\treturn (\n\t\t\t<div className=\"timeslotcolumn\">\n\t\t\t\t<h3 style={{whiteSpace: 'nowrap'}}>{dt.friendlyBegin}</h3>\n\t\t\t\t{dt.times ? dt.times.map((timeSlot) => (\n\t\t\t\t\t<a key={timeSlot.time}\n\t\t\t\t\t   href=\"#\"\n\t\t\t\t\t   className={`buttontimeslot ${timeSlot.isAvailable ? '' : 'unavailable '}w-button`}\n\t\t\t\t\t   onClick={() => this.pickTime(timeSlot, needConfirm)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{timeSlot.time}\n\t\t\t\t\t</a>\n\t\t\t\t)) : <div>dt.times is {typeof dt.times}</div>}\n\t\t\t</div>\n\t\t);\n\t}\n\tprivate pickTime(timeSlot: Api.SlotAvailabilityTime, needConfirm: boolean) {\n\t\tif (timeSlot.isAvailable) {\n\t\t\tif (needConfirm) {\n\t\t\t\tthis.setState({selectedTime: timeSlot, showModal: true});\n\t\t\t} else {\n\t\t\t\tthis.props.onPick(timeSlot);\n\t\t\t}\n\t\t}\n\t}\n}","import { navigate } from \"gatsby\"\n\nexport function getAuthToken(): string {\n\tconst token = sessionStorage.getItem('sessionId') || '';\n\tif (token.length === 0) {\n\t\tloginRedirect();\n\t}\n\treturn token;\n}\n\nexport function loginRedirect() {\n\tsessionStorage.removeItem('sessionId');\n\tnavigate('/admin');\n}","import {SafetyState} from \"./SafetyState\";\nimport {ScheduleApi, ServiceType} from \"../api/api\";\n\nexport let scanTypes: ServiceType[] = [];\n\nnew ScheduleApi().serviceTypesGET({locationId: ''}).then((res) => scanTypes = res.value || []);\n\n// export const scanTypes: ServiceType[] = [\n// \t{name: 'Hip MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Hip MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Knee MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Knee MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Ankle MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Ankle MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Calf MRI', contrast: 'without contrast', time: '45 min', name2: 'Tib-Fib MRI', name3: 'Tibia Fibula MRI', name4: ''},\n// \t{name: 'Calf MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Tib-Fib MRI', name3: 'Tibia Fibula MRI', name4: ''},\n// \t{name: 'Foot MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Foot MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Thigh MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Thigh MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Hand MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Hand MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Wrist MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Wrist MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Forearm MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Forearm MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Elbow MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Elbow MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Humerus MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Humerus MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Shoulder MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Shoulder MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Cervical spine MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Cervical spine MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Multiple sclerosis protocol', name3: '', name4: ''},\n// \t{name: 'Thoracic spine MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Thoracic spine MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Multiple sclerosis protocol', name3: '', name4: ''},\n// \t{name: 'Lumbar spine MRI', contrast: 'without contrast', time: '45 min', name2: 'Low back pain MRI', name3: '', name4: ''},\n// \t{name: 'Lumbar spine MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Brain MRI', contrast: 'without contrast', time: '45 min', name2: 'Memory loss MRI', name3: 'Concussion evaluation MRI', name4: ''},\n// \t{name: 'Brain MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Pituitary (Brain MRI)', contrast: 'with and without contrast', time: '45 min', name2: 'Pituitary protocol MRI', name3: '', name4: ''},\n// \t{name: 'Brain MRA', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Neck MRA', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Neck (soft tissues) MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Soft tissue neck MRI', name3: 'Neck mass MRI', name4: ''},\n// \t{name: 'Chest MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Chest MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Abdomen MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Abdomen MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Liver lesion MRI', name3: 'Kidney lesion MRI', name4: 'Adrenal lesion MRI'},\n// \t{name: 'MRCP', contrast: 'without contrast', time: '45 min', name2: 'Biliary MRI', name3: 'MR Cholangiogram', name4: ''},\n// \t{name: 'Breast implant MRI', contrast: 'without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Pelvic (bony) MRI', contrast: 'without contrast', time: '45 min', name2: 'Sacrum MRI', name3: 'SI joint MRI', name4: ''},\n// \t{name: 'Pelvic (bony) MRI', contrast: 'with and without contrast', time: '45 min', name2: '', name3: '', name4: ''},\n// \t{name: 'Pelvic (prostate) MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Prostate MRI', name3: '', name4: ''},\n// \t{name: 'Pelvic (rectum) MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Rectal MRI', name3: '', name4: ''},\n// \t{name: 'Pelvic (female) MRI', contrast: 'with and without contrast', time: '45 min', name2: 'Female pelvis MRI', name3: 'Uterus MRI', name4: ''},\n// \t{name: 'MR Enterography', contrast: 'with and without contrast', time: '90 min', name2: 'Crohns protocol MRI', name3: '', name4: ''},\n// ];\n\nexport interface IScanTypeState {\n\tmriName: string;\n\tmatches: ServiceType[];\n\toops: string|null;\n\thaveOrder: boolean;\n\tsafetyState: SafetyState;\n}\n","import * as React from 'react'\nimport {EditFormBase} from '../../forms';\nimport * as Api from '../../api/api';\nimport Page from '../../components/Page'\nimport AdminLayout from '../../layouts/admin'\nimport {getAuthToken} from \"../../helpers/authToken\";\nimport {navigate} from \"gatsby\";\nimport {TimePickWidget} from \"../../components/pick-time-component\";\nimport {scanTypes} from \"../../models/Scan\";\n\ninterface IRuleEditorState {\n\thideUnavailable: boolean;\n\thideAvailable: boolean;\n\topen: boolean;\n\treservedUnconfirmed: boolean;\n\tconfirmed: boolean;\n\tsearch: string;\n\tmodal: 'confirm' | 'edit' | 'release' | null;\n\tdata: Api.AvailabilityRule[];\n\tstartTime: string;\n\tendTime: string;\n\tresourceName: string;\n\tcontrastReqStatus: string;\n\terr: string;\n\tdate: string;\n\tnewItemComment: string;\n\tpreviewContrast: boolean;\n}\n\nclass RulesPage extends React.Component<{classes: any}, IRuleEditorState>{\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\thideUnavailable: false,\n\t\t\thideAvailable: false,\n\t\t\topen: false,\n\t\t\treservedUnconfirmed: false,\n\t\t\tconfirmed: false,\n\t\t\tsearch: '',\n\t\t\tmodal: null,\n\t\t\tdata: [],\n\t\t\tstartTime: '7:00',\n\t\t\tendTime: '19:00',\n\t\t\tresourceName: '',\n\t\t\tcontrastReqStatus: '',\n\t\t\tdate: 'yyyy-mm-dd',\n\t\t\terr: '',\n\t\t\tnewItemComment: '',\n\t\t\tpreviewContrast: false,\n\t\t};\n\t}\n\n\tpublic componentDidMount() {\n\t\tnew Api.ResourceApi().availabilityRulesGET({\n\t\t\tsearch: '',\n\t\t\tauthToken: getAuthToken(),\n\t\t\tlocationId: '',\n\t\t\twithContrast: false,\n\t\t} as any).then((result) => {\n\t\t\tif (result.value) {\n\t\t\t\tthis.setState({data: result.value || []});\n\t\t\t} else {\n\t\t\t\tthis.setState({err: result.message || 'Error'});\n\t\t\t}\n\t\t}, (err) => {\n\t\t\tconsole.log(err);\n\t\t\t// TODO: loginRedirect()\n\t\t});\n\n\t}\n\n\tpublic render() {\n\t\treturn (\n\t\t\t<AdminLayout>\n\t\t\t\t<Page>\n\t\t\t\t\t{this.renderInner()}\n\t\t\t\t</Page>\n\t\t\t</AdminLayout>\n\t\t);\n\t}\n\n\tpublic handleAddRule(e) {\n\t\te.preventDefault();\n\t\tnew Api.ResourceApi().availabilityRulesPOST({\n\t\t\tauthToken: getAuthToken(),\n\t\t\treq: {\n\t\t\t\tstatus: this.state.contrastReqStatus,\n\t\t\t\tcomment: this.state.newItemComment,\n\t\t\t\tstartTime: this.state.startTime,\n\t\t\t\tendTime: this.state.endTime,\n\t\t\t\tonThisDay: this.state.search === 'Specific Date' ? this.state.date : this.state.search,\n\t\t\t\tpartitionKey: 'DefaultLocation',\n\t\t\t\trowKey: 'Auto',\n\t\t\t\tpriority: 0,\n\t\t\t\tresourceID: this.state.resourceName,\n\t\t\t},\n\t\t}).then((resp) => {\n\t\t\tif (resp.success) {\n\t\t\t\tthis.setState({data: resp.value || []});\n\t\t\t} else {\n\t\t\t\talert(resp.message);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic handleDeleteRule(e) {\n\t\te.preventDefault();\n\t}\n\n\tpublic renderTable() {\n\t\treturn (\n\t\t\t<form action=\"#\" onSubmit={(e) => this.handleAddRule(e)}>\n\t\t\t\t<table className=\"blue\" style={{width: '500px'}} cellPadding={3}>\n\t\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>#</th>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>On this day</th>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>Starting at time</th>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>Until time</th>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>ResID</th>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>Comment</th>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>Allow Contrast?</th>\n\t\t\t\t\t\t<th style={{whiteSpace: 'nowrap'}}>Actions</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t{(this.state.data || []).map((rule) => (\n\t\t\t\t\t\t<tr key={(rule.partitionKey || '') + (rule.rowKey || '')}>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>{rule.priority}</td>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>{rule.onThisDay}</td>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>{rule.startTime}</td>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>{rule.endTime}</td>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>{rule.resourceID}</td>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>{rule.comment}</td>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>{rule.status}</td>\n\t\t\t\t\t\t\t<td style={{whiteSpace: 'nowrap'}}>\n\t\t\t\t\t\t\t\t<button className=\"button-2 w-button\" type=\"button\" style={{zoom: 0.7}}>▲</button>&nbsp;\n\t\t\t\t\t\t\t\t<button className=\"button-2 w-button\" type=\"button\" style={{zoom: 0.7}}>▼</button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>New</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{EditFormBase.boundChoices(\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\"Any Weekday,Weekend,Mon,Tue,Wed,Thu,Fri,Sat,Sun,Specific Date\".split(','),\n\t\t\t\t\t\t\t\tthis.state.search,\n\t\t\t\t\t\t\t\t(search) => this.setState({search}),\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{this.state.search === 'Specific Date' && (\n\t\t\t\t\t\t\t\tEditFormBase.boundTextboxValue(\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\tthis.state.date,\n\t\t\t\t\t\t\t\t\t(date) => this.setState({date})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{EditFormBase.boundTextboxValue('', this.state.startTime, (startTime) => this.setState({startTime}))}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{EditFormBase.boundTextboxValue('', this.state.endTime, (endTime) => this.setState({endTime}))}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{EditFormBase.boundTextboxValue('',\n\t\t\t\t\t\t\t\tthis.state.resourceName,\n\t\t\t\t\t\t\t\t(resourceName) => this.setState({resourceName})\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{EditFormBase.boundTextboxValue('',\n\t\t\t\t\t\t\t\tthis.state.newItemComment,\n\t\t\t\t\t\t\t\t(newItemComment) => this.setState({newItemComment})\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{EditFormBase.boundChoices('',\n\t\t\t\t\t\t\t\t['Contrast Unavailable', 'Contrast Available', 'Contrast Required', 'Blocked'],\n\t\t\t\t\t\t\t\tthis.state.contrastReqStatus,\n\t\t\t\t\t\t\t\t(contrastReqStatus) => this.setState({contrastReqStatus})\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<button className=\"w-button\" type=\"submit\">Add</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</form>\n\t\t);\n\t}\n\n\tprivate swapContrast(e: React.MouseEvent<HTMLAnchorElement>) {\n\t\te.preventDefault();\n\t\tthis.setState({previewContrast: !this.state.previewContrast});\n\t}\n\n\tpublic renderInner() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h2>Time Rules For This Location</h2>\n\t\t\t\t{this.renderTable()}\n\n\t\t\t\t<h3>Preview Schedule</h3>\n\t\t\t\t<p>Currently viewing <a href=\"javascript:void(0)\" onClick={(e) => this.swapContrast(e)}>{this.state.previewContrast ? 'contrast' : 'non-contrast'} (click to swap)</a>.</p>\n\t\t\t\t<TimePickWidget\n\t\t\t\t\tonPick={(timeSlot) => console.log(timeSlot)}\n\t\t\t\t\tscan={{contrast: this.state.previewContrast ? 'with and without contrast' : '', name: '', time: (scanTypes[0] || {}).time }}\n\t\t\t\t/>\n\n\t\t\t\t<button className=\"w-button\" onClick={() => navigate('/admin/site')}>\n\t\t\t\t\tGo back to site\n\t\t\t\t</button>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default RulesPage;\n"],"names":["TimePickWidget","_React$Component","props","context","_this","call","state","err","offset","total","qna","SafetyState","loadState","selectedTime","times","showModal","_inheritsLoose","_proto","prototype","componentDidMount","_this2","Api","timeSlotsGET","withContrast","this","scan","contrast","locationId","then","result","value","setState","length","message","UNSAFE_componentWillReceiveProps","nextProps","nextContext","renderModal","_this3","React","ReactModal","isOpen","className","overlayClassName","type","onClick","pickTime","render","_this4","_this$state","href","map","date","i","key","JSON","stringify","renderSlotAvailabilityDate","isTomorrow","dt","needConfirm","_this5","style","whiteSpace","friendlyBegin","timeSlot","time","isAvailable","onPick","getAuthToken","token","sessionStorage","getItem","loginRedirect","removeItem","navigate","scanTypes","ScheduleApi","serviceTypesGET","res","RulesPage","hideUnavailable","hideAvailable","open","reservedUnconfirmed","confirmed","search","modal","data","startTime","endTime","resourceName","contrastReqStatus","newItemComment","previewContrast","availabilityRulesGET","authToken","console","log","AdminLayout","Page","renderInner","handleAddRule","e","preventDefault","availabilityRulesPOST","req","status","comment","onThisDay","partitionKey","rowKey","priority","resourceID","resp","success","alert","handleDeleteRule","renderTable","action","onSubmit","width","cellPadding","rule","zoom","EditFormBase","boundChoices","split","boundTextboxValue","swapContrast","name"],"sourceRoot":""}