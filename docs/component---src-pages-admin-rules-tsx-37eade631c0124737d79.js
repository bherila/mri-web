"use strict";(self.webpackChunkmri_web=self.webpackChunkmri_web||[]).push([[66],{4658:function(e,t,n){n.d(t,{L:function(){return c}});var a=n(5540),r=n(6540),o=n(6311),i=n(9812),s=n(4745),l=n.n(s),c=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).state={err:"",offset:0,total:14,qna:i.e.loadState(),selectedTime:null,times:[],showModal:!1},a}(0,a.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;(new o.u8).timeSlotsGET({withContrast:"with and without contrast"===this.props.scan.contrast,locationId:""}).then((function(t){t.value?e.setState({times:t.value||[],total:t.value.length||0,qna:i.e.loadState()}):e.setState({err:t.message||"Error",qna:i.e.loadState()})}),(function(t){return e.setState({err:t,qna:i.e.loadState()})}))},n.UNSAFE_componentWillReceiveProps=function(e,t){this.setState({offset:0}),this.componentDidMount()},n.renderModal=function(){var e=this;return r.createElement(l(),{isOpen:this.state.showModal,className:"modal-content animated fadeInUp",overlayClassName:"modal-wrapper"},r.createElement("p",null,r.createElement("b",null,"The time you selected is tomorrow.")),r.createElement("p",null,"We won't have time to obtain prior authorization from your insurance carrier. If you aren't using insurance, this won't be a problem."),r.createElement("p",null,"Are you sure you want to select this time?"),r.createElement("p",null,r.createElement("button",{type:"button",className:"button w-button",onClick:function(){return e.pickTime(e.state.selectedTime,!1)}},"Yes, continue"),r.createElement("button",{type:"button",className:"button w-button",onClick:function(){return e.setState({showModal:!1})}},"No, change time")))},n.render=function(){var e=this,t=this.state,n=t.offset,a=t.total,o=t.times;return r.createElement(r.Fragment,null,r.createElement("div",{className:"w-row"},r.createElement("div",{className:"w-col w-col-2"},r.createElement("div",{className:"timeslotcolumn"},n>0&&r.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.setState({offset:n-1})},className:"buttontimeslot w-button"},"« Earlier Dates"))),o&&o.map((function(t,a){return a>=n&&a-n<4&&r.createElement("div",{key:JSON.stringify(t||a),className:"w-col w-col-2"},e.renderSlotAvailabilityDate(t,!!t.isTomorrow))})),n+4<a&&r.createElement("div",{className:"w-col w-col-2"},r.createElement("div",{className:"timeslotcolumn"},r.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.setState({offset:n+1})},className:"buttontimeslot w-button"},"Later Dates »")))),this.renderModal())},n.renderSlotAvailabilityDate=function(e,t){var n=this;return r.createElement("div",{className:"timeslotcolumn"},r.createElement("h3",{style:{whiteSpace:"nowrap"}},e.friendlyBegin),e.times?e.times.map((function(e){return r.createElement("a",{key:e.time,href:"#",className:"buttontimeslot "+(e.isAvailable?"":"unavailable ")+"w-button",onClick:function(){return n.pickTime(e,t)}},e.time)})):r.createElement("div",null,"dt.times is ",typeof e.times))},n.pickTime=function(e,t){e.isAvailable&&(t?this.setState({selectedTime:e,showModal:!0}):this.props.onPick(e))},t}(r.Component)},6513:function(e,t,n){n.d(t,{c:function(){return r},e:function(){return o}});var a=n(8007);function r(){var e=sessionStorage.getItem("sessionId")||"";return 0===e.length&&o(),e}function o(){sessionStorage.removeItem("sessionId"),(0,a.oo)("/admin")}},4414:function(e,t,n){n.d(t,{v:function(){return r}});var a=n(6311),r=[];(new a.u8).serviceTypesGET({locationId:""}).then((function(e){return r=e.value||[]}))},8780:function(e,t,n){n.r(t);var a=n(5540),r=n(6540),o=n(818),i=n(6311),s=n(4598),l=n(7065),c=n(6513),u=n(8007),m=n(4658),d=n(4414),h=function(e){function t(t,n){var a;return(a=e.call(this,t,n)||this).state={hideUnavailable:!1,hideAvailable:!1,open:!1,reservedUnconfirmed:!1,confirmed:!1,search:"",modal:null,data:[],startTime:"7:00",endTime:"19:00",resourceName:"",contrastReqStatus:"",date:"yyyy-mm-dd",err:"",newItemComment:"",previewContrast:!1},a}(0,a.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;(new i.pH).availabilityRulesGET({search:"",authToken:(0,c.c)(),locationId:"",withContrast:!1}).then((function(t){t.value?e.setState({data:t.value||[]}):e.setState({err:t.message||"Error"})}),(function(e){console.log(e)}))},n.render=function(){return r.createElement(l.A,null,r.createElement(s.A,null,this.renderInner()))},n.handleAddRule=function(e){var t=this;e.preventDefault(),(new i.pH).availabilityRulesPOST({authToken:(0,c.c)(),req:{status:this.state.contrastReqStatus,comment:this.state.newItemComment,startTime:this.state.startTime,endTime:this.state.endTime,onThisDay:"Specific Date"===this.state.search?this.state.date:this.state.search,partitionKey:"DefaultLocation",rowKey:"Auto",priority:0,resourceID:this.state.resourceName}}).then((function(e){e.success?t.setState({data:e.value||[]}):alert(e.message)}))},n.handleDeleteRule=function(e){e.preventDefault()},n.renderTable=function(){var e=this;return r.createElement("form",{action:"#",onSubmit:function(t){return e.handleAddRule(t)}},r.createElement("table",{className:"blue",style:{width:"500px"},cellPadding:3},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{whiteSpace:"nowrap"}},"#"),r.createElement("th",{style:{whiteSpace:"nowrap"}},"On this day"),r.createElement("th",{style:{whiteSpace:"nowrap"}},"Starting at time"),r.createElement("th",{style:{whiteSpace:"nowrap"}},"Until time"),r.createElement("th",{style:{whiteSpace:"nowrap"}},"ResID"),r.createElement("th",{style:{whiteSpace:"nowrap"}},"Comment"),r.createElement("th",{style:{whiteSpace:"nowrap"}},"Allow Contrast?"),r.createElement("th",{style:{whiteSpace:"nowrap"}},"Actions"))),r.createElement("tbody",null,(this.state.data||[]).map((function(e){return r.createElement("tr",{key:(e.partitionKey||"")+(e.rowKey||"")},r.createElement("td",{style:{whiteSpace:"nowrap"}},e.priority),r.createElement("td",{style:{whiteSpace:"nowrap"}},e.onThisDay),r.createElement("td",{style:{whiteSpace:"nowrap"}},e.startTime),r.createElement("td",{style:{whiteSpace:"nowrap"}},e.endTime),r.createElement("td",{style:{whiteSpace:"nowrap"}},e.resourceID),r.createElement("td",{style:{whiteSpace:"nowrap"}},e.comment),r.createElement("td",{style:{whiteSpace:"nowrap"}},e.status),r.createElement("td",{style:{whiteSpace:"nowrap"}},r.createElement("button",{className:"button-2 w-button",type:"button",style:{zoom:.7}},"▲")," ",r.createElement("button",{className:"button-2 w-button",type:"button",style:{zoom:.7}},"▼")))})),r.createElement("tr",null,r.createElement("td",null,"New"),r.createElement("td",null,o.C.boundChoices("","Any Weekday,Weekend,Mon,Tue,Wed,Thu,Fri,Sat,Sun,Specific Date".split(","),this.state.search,(function(t){return e.setState({search:t})})),"Specific Date"===this.state.search&&o.C.boundTextboxValue("",this.state.date,(function(t){return e.setState({date:t})}))),r.createElement("td",null,o.C.boundTextboxValue("",this.state.startTime,(function(t){return e.setState({startTime:t})}))),r.createElement("td",null,o.C.boundTextboxValue("",this.state.endTime,(function(t){return e.setState({endTime:t})}))),r.createElement("td",null,o.C.boundTextboxValue("",this.state.resourceName,(function(t){return e.setState({resourceName:t})}))),r.createElement("td",null,o.C.boundTextboxValue("",this.state.newItemComment,(function(t){return e.setState({newItemComment:t})}))),r.createElement("td",null,o.C.boundChoices("",["Contrast Unavailable","Contrast Available","Contrast Required","Blocked"],this.state.contrastReqStatus,(function(t){return e.setState({contrastReqStatus:t})}))),r.createElement("td",null,r.createElement("button",{className:"w-button",type:"submit"},"Add"))))))},n.swapContrast=function(e){e.preventDefault(),this.setState({previewContrast:!this.state.previewContrast})},n.renderInner=function(){var e=this;return r.createElement("div",null,r.createElement("h2",null,"Time Rules For This Location"),this.renderTable(),r.createElement("h3",null,"Preview Schedule"),r.createElement("p",null,"Currently viewing ",r.createElement("a",{href:"javascript:void(0)",onClick:function(t){return e.swapContrast(t)}},this.state.previewContrast?"contrast":"non-contrast"," (click to swap)"),"."),r.createElement(m.L,{onPick:function(e){return console.log(e)},scan:{contrast:this.state.previewContrast?"with and without contrast":"",name:"",time:(d.v[0]||{}).time}}),r.createElement("button",{className:"w-button",onClick:function(){return(0,u.oo)("/admin/site")}},"Go back to site"))},t}(r.Component);t.default=h}}]);
//# sourceMappingURL=component---src-pages-admin-rules-tsx-37eade631c0124737d79.js.map