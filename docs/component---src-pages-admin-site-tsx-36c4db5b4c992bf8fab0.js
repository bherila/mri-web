"use strict";(self.webpackChunkmri_web=self.webpackChunkmri_web||[]).push([[528],{6056:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i=n(5540),o=n(6540),a=n(1748),l=n(3120),r=n(7355),s=n(8396),c=n(6886),u=n(7714),d=n(2843),m=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).state=t.selectedAppointment||{},i}(0,i.A)(t,e);var n=t.prototype;return n.setInsurance=function(e){this.setState({insuranceVerified:e}),e||this.setState({confirmed:!1})},n.setPriorAuth=function(e){this.setState({priorAuthObtained:e}),e||this.setState({confirmed:!1})},n.setRIS=function(e){this.setState({orderEnteredToRIS:e}),e||this.setState({confirmed:!1})},n.setCalled=function(e){this.setState({patientWasCalled:e}),e||this.setState({confirmed:!1})},n.setConfirm=function(e){this.setState({confirmed:e})},n.doUpdate=function(){var e=this;(new l.u8).appointmentHandlerPUT({authToken:(0,u.c)(),req:(0,d.A)(this.state)}).then((function(t){t.success?e.props.onConfirm instanceof Function&&e.props.onConfirm():alert(t.message||"Error")}))},n.render=function(){var e=this,t=this.state||{};return o.createElement("div",{className:"centered"},o.createElement("h3",null,"Confirm Reservation"),o.createElement("h3",null,this.props.selectedAppointment.rowKey),o.createElement("h3",null,t.firstName," ",t.lastName),a.C.boundCheckboxValue("Insurance verified, if applicable",t.insuranceVerified||!1,(function(t){return e.setInsurance(t)})),a.C.boundCheckboxValue("Prior authorization obtained, if applicable",t.priorAuthObtained||!1,(function(t){return e.setPriorAuth(t)})),a.C.boundCheckboxValue("Order and Demographics entered into RIS",t.orderEnteredToRIS||!1,(function(t){return e.setRIS(t)})),a.C.boundCheckboxValue("Patient called, if applicable",t.patientWasCalled||!1,(function(t){return e.setCalled(t)})),a.C.boundCheckboxValue("Confirmed",t.confirmed||!1,(function(t){return e.setConfirm(t)})),o.createElement("div",{className:"centered"},o.createElement("button",{className:"button w-button",type:"button",onClick:function(t){return e.confirm(t)}},this.isValid()?"Confirm":"Save"),o.createElement("button",{className:"button w-button",type:"button",onClick:function(t){return e.viewEdit(t)}},"View/Edit Details"),o.createElement("button",{className:"button w-button",type:"button",onClick:function(t){return e.cancel(t)}},"Nevermind")))},n.isValid=function(){return!!this.state.insuranceVerified&&(!!this.state.priorAuthObtained&&(!!this.state.orderEnteredToRIS&&(!!this.state.patientWasCalled&&!!this.state.confirmed)))},n.confirm=function(e){e.preventDefault(),this.doUpdate()},n.cancel=function(e){e.preventDefault(),this.props.onCancel instanceof Function&&this.props.onCancel()},n.viewEdit=function(e){e.preventDefault(),this.props.onRequestEdit instanceof Function&&this.props.onRequestEdit()},t}(o.Component),f=n(454),p=function(e){return(0,f.A)(e),o.createElement("button",{type:"button",className:"button w-button",onClick:function(){return(0,u.e)()}},"Sign out")},h=n(1015),b=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).state={isConfirmed:!1},i}(0,i.A)(t,e);var n=t.prototype;return n.doRelease=function(){var e=this;(new l.u8).appointmentHandlerDELETE({authToken:(0,u.c)(),req:(0,d.A)(this.props.selectedSlotAvailabilityTime.linkedAppointment)}).then((function(t){t.success?e.props.onConfirm instanceof Function&&e.props.onConfirm():alert(t.message||"Error")}))},n.render=function(){var e=this,t=this.props.selectedSlotAvailabilityTime.linkedAppointment||{};return t&&o.createElement("div",{className:"centered"},o.createElement("h3",null,"Release Reservation?"),o.createElement("h3",null,this.props.selectedSlotAvailabilityTime.slotId),o.createElement("h3",null,t.firstName," ",t.lastName),o.createElement("p",null,"This will open the time slot for future booking."),o.createElement("p",null,"Patient data will be removed from this time slot."),o.createElement("p",null,o.createElement("label",{style:{fontWeight:"bold"}},o.createElement("input",{type:"checkbox",onChange:function(t){return e.setState({isConfirmed:t.currentTarget.checked})}}),"Please make sure this time slot is also open in the RIS!")),o.createElement("div",{className:"centered"},o.createElement("button",{disabled:!this.state.isConfirmed,className:(this.state.isConfirmed?"button":"disabled")+" w-button",type:"button",onClick:function(){return e.doRelease()}},"Release"),o.createElement("button",{className:"button w-button",type:"button",onClick:function(){return e.props.onCancel()}},"Nevermind")))},t}(o.Component),C=n(4745),v=n.n(C),E=n(9846),k=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).state={hideUnavailable:!1,hideAvailable:!1,open:!1,reservedUnconfirmed:!1,confirmed:!1,search:"",modal:null,data:[],selectedItem:null,skip:-1},i}(0,i.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;(new l.u8).timeSlotsGET({search:"",authToken:(0,u.c)(),locationId:"",withContrast:!1,skip:this.state.skip}).then((function(t){e.setState({data:t.value||[]})}),(function(e){console.log(e)}))},n.doConfirm=function(e,t){e&&e.preventDefault(),this.setState({selectedItem:t,modal:"confirm"})},n.doEdit=function(e,t){e&&e.preventDefault();var n="/admin/details/?"+("appt="+encodeURIComponent(JSON.stringify(t)));window.open(n,"_blank")},n.doManualSchedule=function(e,t){e&&e.preventDefault(),t.slotId?this.setState({modal:"edit",selectedItem:{slotId:t.slotId,linkedAppointment:{partitionKey:t.slotId.split(" ")[1],rowKey:t.slotId,resourceId:t.resourceId,serviceLength:45},isAvailable:!1,isContrastAvailable:!0,isContrastRequired:!1,isHidden:!1,resourceId:t.resourceId,time:t.time}}):alert("no slotId!")},n.doRelease=function(e,t){e&&e.preventDefault(),this.setState({selectedItem:t,modal:"release"})},n.closeModal=function(){this.setState({modal:null}),this.componentDidMount()},n.render=function(){return o.createElement(s.A,null,o.createElement(r.A,null,this.renderInner()))},n.applies=function(e){return!(this.state.open&&!e.isAvailable)&&(!(this.state.hideUnavailable&&!e.isAvailable)&&((!this.state.hideAvailable||!e.isAvailable)&&((!this.state.reservedUnconfirmed||null!==e.linkedAppointment)&&!!(!this.state.confirmed||e.linkedAppointment&&e.linkedAppointment.confirmed))))},n.renderInner=function(){var e=this;return o.createElement("div",null,o.createElement("h1",null,"Waco Location"),o.createElement("div",{style:{display:"flex",flexDirection:"row",justifyItems:"stretch"}},o.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.createElement("button",{className:"button w-button",onClick:function(t){return e.setState({skip:(e.state.skip||0)-14},(function(){return e.componentDidMount()}))}},"¬´ Previous"),o.createElement("button",{className:"button w-button",onClick:function(t){return e.setState({skip:(e.state.skip||0)+14},(function(){return e.componentDidMount()}))}},"Next ¬ª")),o.createElement("button",{className:"button w-button",type:"button",onClick:function(){return(0,h.oo)("/admin/rules")}},"Manage availability rules"),o.createElement(p,null)),o.createElement("div",{style:{display:"flex",flexDirection:"row",justifyItems:"stretch"}},o.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.C.boundTextboxValue("",this.state.search,(function(t){return e.setState({search:t})}),"Search")),o.createElement("div",{style:{display:"flex",flexDirection:"row",justifySelf:"flex-end"}},o.createElement("button",null,a.C.boundCheckboxValue("Hide Unavailable",this.state.hideUnavailable,(function(t){return e.setState({hideUnavailable:t})}),!1)),o.createElement("button",null,a.C.boundCheckboxValue("Hide Available",this.state.hideAvailable,(function(t){return e.setState({hideAvailable:t})}),!1)),o.createElement("button",null,a.C.boundCheckboxValue("Open",this.state.open,(function(t){return e.setState({open:t,hideUnavailable:!1})}),!1)),o.createElement("button",null,a.C.boundCheckboxValue("Reserved, Unconfirmed",this.state.reservedUnconfirmed,(function(t){return e.setState({reservedUnconfirmed:t})}),!1)),o.createElement("button",null,a.C.boundCheckboxValue("Confirmed",this.state.confirmed,(function(t){return e.setConfirmed(t)}),!1)))),(this.state.data||[]).map((function(t){return o.createElement("div",{key:t.friendlyBegin},o.createElement("h3",null,t.friendlyBegin),o.createElement("table",{className:"blue",style:{fontSize:"12pt"}},o.createElement("tbody",null,(t.times||[]).map((function(n){if(!e.applies(n))return!1;var i="";return n.linkedAppointment&&(n.linkedAppointment.surveyDataJson||(i="‚ö†Ô∏è"),n.linkedAppointment.confirmed&&(i="‚úÖ"),(0,E.isEmpty)(n.linkedAppointment.safetyWarnings)||(i="üõë")),o.createElement("tr",{key:n.slotId},o.createElement("td",null,t.friendlyBegin,", ",n.time," CST"),o.createElement("td",null,i),o.createElement("td",null,n.isAvailable?"Available":"Unavailable"),e.renderSlotActionCell(n))})))))})),this.renderModals())},n.renderSlotActionCell=function(e){var t=this;return e.isAvailable?o.createElement("td",null,o.createElement("button",{className:"button sm w-button",type:"button",onClick:function(n){return t.doManualSchedule(n,e)}},"Manual Schedule")):e.linkedAppointment?o.createElement("td",null,o.createElement("button",{className:"button sm w-button",type:"button",onClick:function(n){return t.doConfirm(n,e)}},"Confirm"),o.createElement("button",{className:"button sm w-button",type:"button",onClick:function(n){return t.doRelease(n,e)}},"Release"),o.createElement("button",{className:"button sm w-button",type:"button",onClick:function(n){return t.doEdit(n,e)}},"View")):o.createElement("td",null,"¬†")},n.setConfirmed=function(e){this.setState({confirmed:e,hideAvailable:!1}),e&&this.setState({reservedUnconfirmed:!1,open:!1})},n.renderModals=function(){var e=this;return!!this.state.selectedItem&&o.createElement(o.Fragment,null,o.createElement(v(),{isOpen:"release"===this.state.modal,onRequestClose:function(){return e.closeModal()},className:"modal-content animated fadeInUp",overlayClassName:"modal-wrapper"},o.createElement(b,{selectedSlotAvailabilityTime:this.state.selectedItem,onConfirm:function(){return e.closeModal()},onCancel:function(){return e.closeModal()},onRequestEdit:function(){return e.closeModal()}})),this.state.selectedItem.linkedAppointment&&o.createElement(v(),{isOpen:"confirm"===this.state.modal,onRequestClose:function(){return e.closeModal()},className:"modal-content animated fadeInUp",overlayClassName:"modal-wrapper"},o.createElement(m,{selectedAppointment:this.state.selectedItem.linkedAppointment,onConfirm:function(){return e.closeModal()},onCancel:function(){return e.closeModal()},onRequestEdit:function(){return e.setState({modal:"edit"})}})),o.createElement(v(),{isOpen:"edit"===this.state.modal,onRequestClose:function(){return e.closeModal()},className:"modal-content-full animated fadeInUp",overlayClassName:"modal-wrapper"},o.createElement("div",{className:"centered white-box"},o.createElement(c.m,{selectedSlotAvailabilityTime:this.state.selectedItem,onConfirm:function(){return e.closeModal()},onCancel:function(){return e.closeModal()}}))))},t}(o.Component)},454:function(e,t,n){function i(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,{A:function(){return i}})}}]);
//# sourceMappingURL=component---src-pages-admin-site-tsx-36c4db5b4c992bf8fab0.js.map